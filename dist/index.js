/**
* @ibrahimcesar/react-lite-youtube-embed v3.0.3-beta.0
*  git+https://github.com/ibrahimcesar/react-lite-youtube-embed.git
*
*  Copyright (c) Ibrahim Cesar <email@ibrahimcesar.com> and project contributors.
*
*  This source code is licensed under the MIT license found in the
*  LICENSE file in the root directory of this source tree.
*
*  Author site: https://ibrahimcesar.cloud
*/
"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("react/jsx-runtime"),j=require("react");function G(e){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const i in e)if(i!=="default"){const d=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(a,i,d.get?d:{enumerable:!0,get:()=>e[i]})}}return a.default=e,Object.freeze(a)}const u=G(j),J={default:120,mqdefault:320,hqdefault:480,sddefault:640,maxresdefault:1280},Q=(e,a,i,d="maxresdefault")=>{const[t,r]=j.useState("");return j.useEffect(()=>{const o=`https://img.youtube.com/${a}/${e}/${d}.${i}`,m=`https://img.youtube.com/${a}/${e}/hqdefault.${i}`,l=J[d],s=new Image;s.onload=()=>{s.width<l?r(m):r(o)},s.onerror=()=>r(m),s.src=o},[e,a,i,d]),t};var U=(e=>(e[e.UNSTARTED=-1]="UNSTARTED",e[e.ENDED=0]="ENDED",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.BUFFERING=3]="BUFFERING",e[e.CUED=5]="CUED",e))(U||{}),x=(e=>(e[e.INVALID_PARAM=2]="INVALID_PARAM",e[e.HTML5_ERROR=5]="HTML5_ERROR",e[e.VIDEO_NOT_FOUND=100]="VIDEO_NOT_FOUND",e[e.NOT_EMBEDDABLE=101]="NOT_EMBEDDABLE",e[e.NOT_EMBEDDABLE_DISGUISED=150]="NOT_EMBEDDABLE_DISGUISED",e))(x||{});function z(e,a,i,d,t){const r={"@context":"https://schema.org","@type":"VideoObject",name:t?.name||a,thumbnailUrl:[t?.thumbnailUrl||i],embedUrl:t?.embedUrl||`${d}/embed/${e}`,contentUrl:t?.contentUrl||`https://www.youtube.com/watch?v=${e}`,...t?.description&&{description:t.description},...t?.uploadDate&&{uploadDate:t.uploadDate},...t?.duration&&{duration:t.duration}};return JSON.stringify(r)}function K(e,a){const[i,d]=u.useState(!1),[t,r]=u.useState(e.alwaysLoadIframe||!1),o=encodeURIComponent(e.id),m=typeof e.playlistCoverId=="string"?encodeURIComponent(e.playlistCoverId):null,l=e.title,s=e.poster||"hqdefault",v=e.announce||"Watch",R=e.alwaysLoadIframe?e.autoplay&&e.muted:!0,E=u.useMemo(()=>{const D=new URLSearchParams({...e.muted?{mute:"1"}:{},...R?{autoplay:"1"}:{},...e.enableJsApi?{enablejsapi:"1"}:{},...e.playlist?{list:o}:{}});return e.params&&new URLSearchParams(e.params.startsWith("&")?e.params.slice(1):e.params).forEach((y,g)=>{D.append(g,y)}),D},[e.muted,R,e.enableJsApi,e.playlist,o,e.params]),f=u.useMemo(()=>e.cookie?"https://www.youtube.com":"https://www.youtube-nocookie.com",[e.cookie]),O=u.useMemo(()=>e.playlist?`${f}/embed/videoseries?${E.toString()}`:`${f}/embed/${o}?${E.toString()}`,[e.playlist,f,o,E]),A=!e.thumbnail&&!e.playlist&&s==="maxresdefault",k=e.webp?"webp":"jpg",C=e.webp?"vi_webp":"vi",N=A?Q(e.id,C,k,s):null,b=u.useMemo(()=>e.thumbnail||N||`https://i.ytimg.com/${C}/${e.playlist?m:o}/${s}.${k}`,[e.thumbnail,N,C,e.playlist,m,o,s,k]),L=e.activatedClass||"lyt-activated",S=e.adNetwork||!1,_=e.aspectHeight||9,M=e.aspectWidth||16,P=e.iframeClass||"",B=e.playerClass||"lty-playbtn",F=e.wrapperClass||"yt-lite",$=u.useCallback(e.onIframeAdded||function(){},[e.onIframeAdded]),W=e.rel?"prefetch":"preload",Y=e.containerElement||"article",H=e.noscriptFallback!==!1,V=()=>{i||d(!0)},T=()=>{t||r(!0)};return u.useEffect(()=>{t&&($(),e.focusOnLoad&&typeof a=="object"&&a?.current&&a.current.focus())},[t,$,e.focusOnLoad,a]),u.useEffect(()=>{if(!t||!e.enableJsApi||!(e.onReady||e.onStateChange||e.onError||e.onPlay||e.onPause||e.onEnd||e.onBuffering||e.onPlaybackRateChange||e.onPlaybackQualityChange))return;let I=!1;const y=h=>{if(h.origin!=="https://www.youtube.com"&&h.origin!=="https://www.youtube-nocookie.com")return;let c;try{c=typeof h.data=="string"?JSON.parse(h.data):h.data}catch{return}switch(c.event){case"onReady":I||(I=!0,e.onReady&&e.onReady({videoId:e.id,title:l}));break;case"onStateChange":if(c.info?.playerState!==void 0){const w=c.info.playerState;switch(e.onStateChange&&e.onStateChange({state:w,currentTime:c.info.currentTime,duration:c.info.duration}),w){case 1:e.onPlay?.();break;case 2:e.onPause?.();break;case 0:e.onEnd?.(),e.stopOnEnd&&typeof a=="object"&&a?.current?.contentWindow&&a.current.contentWindow.postMessage('{"event":"command","func":"stopVideo","args":""}',"*");break;case 3:e.onBuffering?.();break}}break;case"onError":if(c.info&&"errorCode"in c.info){const w=c.info.errorCode;e.onError&&e.onError(w)}break;case"onPlaybackRateChange":c.info?.playbackRate!==void 0&&e.onPlaybackRateChange?.(c.info.playbackRate);break;case"onPlaybackQualityChange":c.info?.playbackQuality!==void 0&&e.onPlaybackQualityChange?.(c.info.playbackQuality);break}};window.addEventListener("message",y);const g=()=>{typeof a=="object"&&a?.current?.contentWindow&&a.current.contentWindow.postMessage('{"event":"listening","id":"'+o+'"}',"*")};g();const q=setTimeout(g,100);return()=>{window.removeEventListener("message",y),clearTimeout(q)}},[t,e.enableJsApi,e.onReady,e.onStateChange,e.onError,e.onPlay,e.onPause,e.onEnd,e.onBuffering,e.onPlaybackRateChange,e.onPlaybackQualityChange,e.stopOnEnd,e.id,o,l,a]),n.jsxs(n.Fragment,{children:[!e.lazyLoad&&n.jsx("link",{rel:W,href:b,as:"image"}),n.jsx(n.Fragment,{children:i&&n.jsxs(n.Fragment,{children:[n.jsx("link",{rel:"preconnect",href:f}),n.jsx("link",{rel:"preconnect",href:"https://www.google.com"}),S&&n.jsxs(n.Fragment,{children:[n.jsx("link",{rel:"preconnect",href:"https://static.doubleclick.net"}),n.jsx("link",{rel:"preconnect",href:"https://googleads.g.doubleclick.net"})]})]})}),e.seo&&!e.playlist&&n.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:z(e.id,l,b,f,e.seo)}}),H&&!e.playlist&&n.jsx("noscript",{children:n.jsxs("a",{href:`https://www.youtube.com/watch?v=${e.id}`,"aria-label":`Watch ${l} on YouTube`,children:['Watch "',l,'" on YouTube']})}),n.jsxs(Y,{onPointerOver:V,onClick:T,className:`${F} ${t?L:""}`,"data-title":l,role:t?void 0:"img","aria-label":t?void 0:`${l} - YouTube video preview`,style:{...!e.lazyLoad&&{backgroundImage:`url(${b})`},"--aspect-ratio":`${_/M*100}%`,...e.style||{}},children:[e.lazyLoad&&!t&&n.jsx("img",{src:b,alt:`${l} - YouTube thumbnail`,className:"lty-thumbnail",loading:"lazy"}),n.jsx("button",{type:"button",className:B,"aria-label":`${v} ${l}`,"aria-hidden":t||void 0,tabIndex:t?-1:0,onClick:T,children:n.jsx("span",{className:"lty-visually-hidden",children:v})}),t&&n.jsx("iframe",{ref:a,className:P,title:l,width:"560",height:"315",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,src:O,referrerPolicy:e.referrerPolicy||"strict-origin-when-cross-origin"})]})]})}const X=u.forwardRef(K);exports.PlayerError=x;exports.PlayerState=U;exports.default=X;
//# sourceMappingURL=index.js.map
